<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>dPaul Technologies Terminal</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --green: #4dff91;
            --green-dim: #2a8a50;
            --bg: #0a0f0a;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        body {
            background: var(--bg);
            font-family: 'Courier Prime', 'Courier New', monospace;
        }

        /* Full-screen CRT */
        .screen {
            width: 100vw;
            height: 100vh;
            background: var(--bg);
            padding: 48px 28px 40px 28px;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }

        /* Scanlines */
        .screen::before {
            content: '';
            position: absolute;
            inset: 0;
            background: repeating-linear-gradient(
                to bottom,
                transparent 0px,
                transparent 3px,
                rgba(0,0,0,0.2) 3px,
                rgba(0,0,0,0.2) 4px
            );
            pointer-events: none;
            z-index: 10;
        }

        /* Vignette */
        .screen::after {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(
                ellipse at center,
                transparent 45%,
                rgba(0,0,0,0.65) 100%
            );
            pointer-events: none;
            z-index: 11;
        }

        /* Ambient glow behind text */
        .screen-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            height: 70%;
            background: radial-gradient(ellipse, rgba(77,255,145,0.05) 0%, transparent 70%);
            pointer-events: none;
            z-index: 1;
        }

        /* Drifting scan artifact */
        .scan-line {
            position: absolute;
            width: 100%;
            height: 3px;
            background: linear-gradient(to right, transparent, rgba(77,255,145,0.12), transparent);
            left: 0;
            top: 0;
            animation: scanArtifact 8s linear infinite;
            z-index: 12;
            pointer-events: none;
        }

        @keyframes scanArtifact {
            0%   { top: -5%; opacity: 0; }
            10%  { opacity: 1; }
            90%  { opacity: 1; }
            100% { top: 105%; opacity: 0; }
        }

        /* CRT flicker */
        @keyframes flicker {
            0%   { opacity: 1; }
            2%   { opacity: 0.96; }
            4%   { opacity: 1; }
            50%  { opacity: 0.995; }
            52%  { opacity: 0.97; }
            54%  { opacity: 1; }
            100% { opacity: 1; }
        }

        .screen { animation: flicker 6s ease-in-out infinite; }

        /* Content */
        .terminal-content {
            position: relative;
            z-index: 5;
        }

        .terminal-header {
            color: var(--green-dim);
            font-size: 10px;
            letter-spacing: 2px;
            margin-bottom: 32px;
            opacity: 0.6;
            text-shadow: 0 0 8px var(--green-dim);
            line-height: 1.6;
        }

        .terminal-text {
            color: var(--green);
            font-size: clamp(16px, 4.5vw, 21px);
            line-height: 1.85;
            text-shadow:
                0 0 8px rgba(77,255,145,0.9),
                0 0 18px rgba(77,255,145,0.4),
                0 0 35px rgba(77,255,145,0.15);
            letter-spacing: 0.3px;
            word-break: break-word;
            transition: opacity 0.06s;
        }

        .url-line {
            font-weight: 700;
            text-decoration: underline;
            text-decoration-color: rgba(77,255,145,0.45);
            letter-spacing: 1px;
        }

        /* Blinking block cursor */
        .cursor {
            display: inline-block;
            width: 11px;
            height: 1.1em;
            background: var(--green);
            margin-left: 2px;
            vertical-align: text-bottom;
            box-shadow: 0 0 8px rgba(77,255,145,0.9);
            animation: blink 0.85s step-end infinite;
        }

        @keyframes blink {
            0%, 49% { opacity: 1; }
            50%, 100% { opacity: 0; }
        }

        /* Status bar */
        .status-bar {
            position: absolute;
            bottom: 16px;
            left: 28px;
            right: 28px;
            display: flex;
            justify-content: space-between;
            z-index: 5;
        }

        .status-text {
            color: var(--green-dim);
            font-size: 10px;
            letter-spacing: 2px;
            opacity: 0.45;
            text-shadow: 0 0 6px var(--green-dim);
        }
    </style>
</head>
<body>
    <div class="screen">
        <div class="scan-line"></div>
        <div class="screen-glow"></div>

        <div class="terminal-content">
            <div class="terminal-header">
                dPAUL TECHNOLOGIES MKII — SYSTEM TERMINAL v1.0 — 1972
            </div>
            <div class="terminal-text" id="output"></div>
        </div>

        <div class="status-bar">
            <span class="status-text" id="statusLeft">READY</span>
            <span class="status-text" id="clock"></span>
        </div>
    </div>

    <script>
        // ── Audio ─────────────────────────────────────────────────────────────
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function playClick(isReturn = false) {
            const osc    = audioCtx.createOscillator();
            const gain   = audioCtx.createGain();
            const filter = audioCtx.createBiquadFilter();

            filter.type          = 'bandpass';
            filter.frequency.value = isReturn ? 600 : 3000 + Math.random() * 2000;
            filter.Q.value       = 0.8;

            osc.type           = 'square';
            osc.frequency.value = isReturn ? 200 : 1200 + Math.random() * 800;

            const dur = isReturn ? 0.12 : 0.04;
            gain.gain.setValueAtTime(isReturn ? 0.18 : 0.09, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + dur);

            osc.connect(filter);
            filter.connect(gain);
            gain.connect(audioCtx.destination);

            osc.start();
            osc.stop(audioCtx.currentTime + dur);
        }

        // ── Clock ─────────────────────────────────────────────────────────────
        function updateClock() {
            const now = new Date();
            const pad = n => String(n).padStart(2,'0');
            document.getElementById('clock').textContent =
                `${pad(now.getHours())}:${pad(now.getMinutes())}:${pad(now.getSeconds())}`;
        }
        setInterval(updateClock, 1000);
        updateClock();

        // ── Lines ─────────────────────────────────────────────────────────────
        const lines = [
            { text: 'To enjoy these free Synths',                 delay: 58  },
            { text: 'and Tools head over to your',                delay: 58  },
            { text: 'nearest Laptop or Desktop',                  delay: 58  },
            { text: 'computer to enjoy properly',                 delay: 58  },
            { text: 'due to their size',                          delay: 58  },
            { text: 'and complexity.',                            delay: 58  },
            { text: '',                                            pause: 500 },
            { text: '> dpaul.studio', cssClass: 'url-line',       delay: 80  },
        ];

        // ── Typewriter ────────────────────────────────────────────────────────
        const output = document.getElementById('output');
        const cursor = document.createElement('span');
        cursor.className = 'cursor';

        const sleep = ms => new Promise(r => setTimeout(r, ms));

        async function typeLine({ text = '', delay = 50, pause = 0, cssClass } = {}) {
            if (!text) {
                output.appendChild(document.createElement('br'));
                if (pause) await sleep(pause);
                return;
            }

            const span = document.createElement('span');
            if (cssClass) span.className = cssClass;
            output.appendChild(span);

            for (const ch of text) {
                span.textContent += ch;
                playClick(false);
                await sleep(delay + (Math.random() - 0.5) * delay * 0.4);
            }

            playClick(true);
            output.appendChild(document.createElement('br'));
            if (pause) await sleep(pause);
        }

        async function clearScreen() {
            // Quick flicker before wipe
            output.style.opacity = '0.3';
            await sleep(80);
            output.style.opacity = '1';
            await sleep(60);
            output.style.opacity = '0.1';
            await sleep(60);
            output.innerHTML = '';
            output.style.opacity = '1';
        }

        async function run() {
            while (true) {
                // Initial pause before typing starts
                await sleep(2500);
                document.getElementById('statusLeft').textContent = 'WRITING';

                for (const line of lines) {
                    output.appendChild(cursor);
                    await typeLine(line);
                }

                output.appendChild(cursor);
                document.getElementById('statusLeft').textContent = 'READY';

                // Hold for 15 seconds then clear and loop
                await sleep(15000);
                document.getElementById('statusLeft').textContent = 'CLEARING';
                await clearScreen();
                await sleep(600);
            }
        }

        // Unlock audio on first tap (mobile requirement)
        document.addEventListener('touchstart', () => {
            if (audioCtx.state === 'suspended') audioCtx.resume();
        }, { once: true });

        window.addEventListener('load', () => {
            audioCtx.resume().then(run);
        });
    </script>
</body>
</html>
